# 中华优秀传统文化数据爬取与可视化系统
> 课程：数据爬取与预处理 | 信息管理与信息系统
> 
> 作者：CappuccinoRose
---
## 1. 项目简介
本项目是一个基于 Python Flask 后端与传统前端技术栈结合的 Web 应用，旨在通过现代科技手段（爬虫、数据可视化）数字化呈现中华优秀传统文化的魅力。
项目通过编写定向爬虫，从多个权威文化网站（如中国国家图书馆、数字敦煌、故宫博物院等）获取古籍、汉服、敦煌壁画、非物质文化遗产等数据，并利用前端技术进行交互式展示与数据分析，让用户能直观、深入地了解传统文化。
---
## 2. 技术栈
- **后端框架**：Python Flask
- **数据爬取**：`Requests`, `Selenium`, `lxml` (XPath), `BeautifulSoup`
- **数据处理**：`Pandas`, `JSON`
- **前端技术**：HTML5, CSS3, JavaScript, jQuery
- **前端组件**：Bootstrap (响应式布局), Waves (特效插件), ECharts, Plotly
- **其他**：`stealth.min.js` (反爬虫伪装), `Chrome WebDriver`
---
## 3. 项目目录结构
```text
Project_Root/
├── Datas/               # 数据存储目录
│   ├── *.json          # 各模块爬取的 JSON 数据 (如 Book.json, Cloth.json)
│   └── *.txt           # 辅助数据 (如 IP 代理池、轮播图链接)
├── Spiders/            # 爬虫脚本目录
│   ├── __init__.py     # 浏览器初始化配置
│   ├── book_spider.py  # 古籍典藏爬虫
│   ├── cloth_spider.py # 汉服模块爬虫
│   ├── e_dun_huang_spider.py # 敦煌莫高窟爬虫
│   ├── heritage_spider.py     # 非物质文化遗产列表爬虫
│   ├── poet_spider.py         # 中国著名诗人爬虫
│   ├── treasure_spider.py    # 珍稀宝阁爬虫
│   └── ... (其他详情页爬虫)
├── Static/             # 静态资源目录
│   ├── css/            # 全局样式及各模块样式
│   ├── js/             # jQuery 插件及交互脚本
│   └── images/         # 网站图标素材
├── Templates/          # 前端模板目录
│   ├── Index.html      # 首页
│   ├── Book.html       # 古籍页面
│   ├── Cloth.html      # 汉服页面
│   ├── E_dunhuang.html # 敦煌页面
│   ├── Heritage.html   # 非遗页面
│   ├── Poet.html       # 诗人页面
│   ├── Treasure.html   # 宝阁页面
│   └── Statistic.html  # 统计图表页面
└── Views.py            # 主程序入口 (路由配置与启动文件)
```
---
## 4. 核心功能模块
### 4.1 数据爬取模块
针对不同的网站结构，采用了不同的爬取策略：
- **古籍典藏**：基于 `lxml` 解析中国国家图书馆 HTML 源码，处理了复杂的嵌套标签文本合并问题。
- **珍稀宝阁**：使用 Selenium 模拟浏览器操作，解决动态加载和验证码问题，并处理了图片防盗链。
- **华丽敦煌**：结合 XPath 提取壁画信息，利用 `urllib` 进行 URL 拼接，实现了分页爬取。
- **华夏衣冠**：通过循环请求参数，实现了多页汉服数据的批量获取与合并。
- **非物质文化遗产 & 著名诗人**：分析 AJAX 请求参数，直接通过 API 获取数据，并引入重试机制处理网络延迟。
### 4.2 前端展示模块
- **首页**：集成轮播图（基于爬取数据）和各模块导航。
- **列表展示**：
    - **汉服**：瀑布流布局，图片懒加载。
    - **宝阁**：点击展开/隐藏交互，支持按 ID 跳转详情。
    - **敦煌**：翻页展示，利用 jQuery 控制 Section 切换。
- **详情页**：统一设计的详情模板，包含表格布局和分页逻辑。
### 4.3 数据可视化模块
- **后端生成**：利用 Python `Plotly` 库直接生成交互式 HTML 图表（如宝物分类饼图），降低前端编码复杂度。
- **前端渲染**：利用 `ECharts` 实现敦煌朝代统计图、历史朝代更迭图等，支持交互与高亮显示。
---
## 5. 运行指南
### 5.1 环境准备
确保已安装 Python 3.x，并安装以下依赖库：
```bash
pip install flask requests lxml selenium pandas plotly
```
*注：需下载对应版本的 ChromeDriver 并配置环境变量。*
### 5.2 启动项目
在确保项目依赖安装完成后，直接运行项目根目录下的主程序：
```bash
python Views.py
```
### 5.3 访问
启动成功后，打开浏览器访问控制台输出的本地地址（通常是 `http://127.0.0.1:5000/`）。
---
## 6. 项目难点与解决方案
1.  **反爬虫对策**：
    - **User-Agent 伪装**：编写随机 UA 生成器，模拟不同设备访问。
    - **Selenium 伪装**：引入 `stealth.min.js` 脚本，屏蔽 `webdriver` 标识，绕过云端检测。
    - **访问频率控制**：引入 `time.sleep()` 与 `WebDriverWait`，平衡爬取效率与被封风险。
2.  **动态页面处理**：
    - 对于通过 AJAX 动态加载的网站，不直接爬取 HTML，而是通过 F12 分析网络请求，直接请求 API 接口并传递参数。
3.  **数据清洗**：
    - 使用 `str.join()` 替代低效的字符串 `+` 拼接。
    - 对日期、朝代等字段进行切片处理（如 `[:4]`）以适应可视化需求。
4.  **交互体验**：
    - 弃用原生 JS，使用 jQuery 简化 DOM 操作和事件绑定。
    - 引入 Bootstrap 和 Waves 插件，提升页面的响应式能力和视觉质感。
---
## 7. 总结
本项目成功实现了从数据获取、清洗、存储到前端可视化展示的全流程。在面对复杂的网站结构和反爬虫机制时，灵活运用了 Selenium、XPath 及模拟请求等多种技术手段，最终构建了一个内容丰富、交互友好的传统文化展示平台。
