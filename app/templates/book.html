<!DOCTYPE html>
<html lang="ZH-CN">

<head>
  <meta charset="UTF-8">
  <title>古籍典藏</title>
  <!-- 设置屏幕宽度为设备宽度，初始缩放比例为1.0 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- 定义网站的描述和关键词 -->
  <meta name="description" content="文化魅力是一个致力于传承和弘扬中华优秀传统文化的平台，提供丰富的古籍典藏、非物质文化遗产和著名诗人的介绍。
              " />
  <meta name="keywords" content="
             文化魅力,中华传统文化,古籍典藏,非物质文化遗产,著名诗人，敦煌壁画，文物珍宝，统计图展
               " />
  <!-- 设置网站图标 -->
  <link rel="shortcut icon" href="../../static/favicon.ico" type="image/x-icon">
  <!-- 使用 jsDelivr，直接在项目中使用 Bootstrap 编译过的 CSS  -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css">
  <!-- 导入下载的waves.min.css -->
  <link rel="stylesheet" href="../static/css/waves.min.css">
  <!-- 导入自定义样式 -->
  <link rel="stylesheet" href="../static/css/book.css">
  <!-- 导入通用样式 -->
  <link rel="stylesheet" href="../static/css/common.css">
  <!-- 导入基础样式 -->
  <link rel="stylesheet" href="../static/css/base.css">
</head>

<body>
  <!--头部模块-->
  <header>
    <!--首页导航栏-->
    <nav class="index-nav">
      <!--网站logo设计-->
      <h1 class="logo">
        <a href="#">文化魅力</a>
      </h1>
      <!--首页导航栏列表-->
      <ul class="nav-list">
        <li><a href="{{ url_for('index') }}">首页</a></li>
        <li><a href="javascript:;">古籍典藏</a></li>
        <li class="heritage">
          <a href="{{ url_for('heritage') }}">非物质文化遗产</a>
        </li>
        <li class="poem">
          <a href="{{ url_for('poet') }}">中国著名诗人</a>
        </li>
      </ul>
    </nav>
  </header>
  <!-- 使用响应式布局col-sm-，col-md-控制宽度 -->
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-1 col-md-2 sidebar">
        <ul class="nav nav-sidebar" id="nav">
          <li><a href="javascript:;" data-url="book1.html">本馆资源</a></li>
          <li><a href="javascript:;" data-url="book2.html">外馆资源</a></li>
          <li><a href="javascript:;" data-url="book3.html">古籍检索分析系统</a></li>
        </ul>
      </div>
      <div class="col-sm-9 col-md-10 main">
        <div id="tab-container">
        </div>
      </div>
    </div>
  </div>
  <!--底部模块-->
  <footer class="cloth-footer">
    <!--版心-->
    <div class="container">
      <!--左边部分-->
      <div class="footer-left icon">
        <p>
          文化魅力
          <img src="../static/images/菏泽牡丹.png" alt="菏泽牡丹">
          是一个
          致力于传承和弘扬中华优秀传统文化的平台<br><br>
        </p>
      </div>
      <!--右边部分-->
      <div class="footer-right icon">
        <ul>
          <li>邮箱:3163880836@qq.com</li><br>
          <li>
            版权所有
            <img src="../static/images/版权.png" alt="版权">
            <strong>信管2301-刘紫涵-1602230121</strong>
          </li>
        </ul>
      </div>
    </div>
  </footer>
  <!-- --引入jQuery-- -->
  <script src="../static/js/jquery-3.7.1.min.js"></script>
  <!-- 引入waves.min.js -->
  <script src="../static/js/book/waves.min.js"></script>
  <!-- --引入BootstrapMenu-- -->
  <script src="../static/js/book/BootstrapMenu.min.js"></script>
  <!-- 引入外部JS文件 -->
  <script src="../static/js/book/book.js"></script>
  <script>
    $(document).ready(function () {
      $('#nav').on('click', 'a', function (e) {
        e.preventDefault();
        var $this = $(this);
        var url = $this.data('url');
        var start, end;

        switch (url) {
          case 'book1.html':
            start = 0;
            end = 15;
            break;
          case 'book2.html':
            start = 15;
            end = 26;
            break;
          case 'book3.html':
            start = 26;
            end = 40;
            break;
          default:
            start = 0;
            end = 15;
        }

        $.ajax({
          url: '/api/books',
          type: 'GET',
          data: { start: start, end: end },
          success: function (data) {
            var html = '<div class="table-responsive"><table class="table table-striped"><thead style="color: #5e0b12 !important;"><tr><th><img src="../static/images/古籍.png" width="25px" alt="古籍" title="古籍典藏名称">古籍</th><th><img src="../static/images/权限.png" width="25px" alt="权限" title="访问权限"></th><th><img src="../static/images/描述.png" width="25px" alt="描述">描述</th></tr></thead><tbody style="color: #5e0b12 !important;">';
            data.forEach(function (book) {
              html += '<tr><td><img class="book-img" src="' + book.src + '" title = "' + book.title + '" </td><td>' + book.permission + '</td><td>' + book.text_description + '</td></tr>';
            });
            html += '</tbody></table></div>';
            $('#tab-container').html(html);
          },
          error: function () {
            alert('数据加载失败');
          }
        });
      });
      // 默认打开页面是第一个选项卡
      $('#nav li:first-child a').trigger('click');
    });
  </script>
</body>

</html>